<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot Embed Test</title>
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 40px 20px;
        line-height: 1.6;
        color: #333;
      }
      h1 {
        color: #2563eb;
        text-align: center;
        margin-bottom: 30px;
      }
      .test-section {
        background: #f8fafc;
        padding: 30px;
        border-radius: 12px;
        margin: 30px 0;
        border: 1px solid #e2e8f0;
      }
      .test-section h2 {
        color: #1e40af;
        margin-top: 0;
      }
      .code-block {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: monospace;
        font-size: 14px;
        overflow-x: auto;
        margin: 20px 0;
      }
      .success {
        background: #dcfce7;
        border: 1px solid #22c55e;
        color: #166534;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .info {
        background: #dbeafe;
        border: 1px solid #3b82f6;
        color: #1e40af;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .warning {
        background: #fef3c7;
        border: 1px solid #f59e0b;
        color: #92400e;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ¤– Chatbot Embed Test</h1>

    <div class="info">
      <strong>â„¹ï¸ Test Status:</strong> This page is testing the embeddable
      chatbot system. Look for a floating chat button in the bottom-right
      corner.
    </div>

    <div class="test-section">
      <h2>ğŸ§ª What We're Testing</h2>
      <ul>
        <li>
          <strong>Embed Loading:</strong> The chatbot script loads from your
          local server
        </li>
        <li>
          <strong>UI Rendering:</strong> Floating button and chat interface
          appear
        </li>
        <li>
          <strong>Chat Functionality:</strong> Send messages and receive
          responses
        </li>
        <li>
          <strong>API Integration:</strong> Messages are sent to your local API
        </li>
      </ul>
    </div>

    <div class="test-section">
      <h2>ğŸ“‹ Test Steps</h2>
      <ol>
        <li>
          <strong>Look for the chat button:</strong> A blue circular button
          should appear in the bottom-right corner
        </li>
        <li>
          <strong>Click the button:</strong> This should open the chat interface
        </li>
        <li>
          <strong>Send a message:</strong> Type "Hello" and press Enter or click
          the send button
        </li>
        <li>
          <strong>Check the response:</strong> You should see a response from
          the AI
        </li>
        <li>
          <strong>Test closing:</strong> Click the Ã— button or outside the chat
          to close it
        </li>
      </ol>
    </div>

    <div class="test-section">
      <h2>ğŸ”§ Technical Details</h2>
      <p>
        <strong>Embed Script URL:</strong>
        <code>http://localhost:3001/embed/test-embed.js</code>
      </p>
      <p>
        <strong>API Endpoint:</strong>
        <code>http://localhost:3001/api/public-chat</code>
      </p>
      <p>
        <strong>Server Status:</strong>
        <span id="server-status">Checking...</span>
      </p>
    </div>

    <div class="test-section">
      <h2>ğŸ“± Expected Behavior</h2>
      <div class="code-block">
        âœ… Floating chat button appears âœ… Clicking button opens chat interface
        âœ… Welcome message is displayed âœ… Input field is functional âœ… Send
        button works âœ… Messages are sent to API âœ… AI responses are received âœ…
        Chat can be closed
      </div>
    </div>

    <div class="warning">
      <strong>âš ï¸ Note:</strong> This is currently using a mock AI response. To
      test with real AI, you'll need to:
      <ol>
        <li>Set up your OpenRouter API key</li>
        <li>Connect to your Supabase database</li>
        <li>Update the API endpoint URLs</li>
      </ol>
    </div>

    <div class="success">
      <strong>ğŸ‰ Success!</strong> If you can see the chat button and interact
      with it, your embed system is working correctly!
    </div>

    <script>
      // Check server status
      fetch("http://localhost:3001/health")
        .then(response => response.json())
        .then(data => {
          document.getElementById("server-status").textContent = "âœ… Running";
          document.getElementById("server-status").style.color = "#22c55e";
        })
        .catch(error => {
          document.getElementById("server-status").textContent =
            "âŒ Not running";
          document.getElementById("server-status").style.color = "#ef4444";
        });

      // Add some interactive elements
      console.log("ğŸš€ Test page loaded successfully!");
      console.log(
        "ğŸ” Look for the floating chat button in the bottom-right corner"
      );
    </script>

    <!-- This is where your chatbot will be embedded -->
    <script src="http://localhost:3001/embed/test-embed.js"></script>
  </body>
</html>
